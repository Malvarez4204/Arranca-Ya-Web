<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perfil - Arranca Ya!</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
<style>
:root {
    --green-primary: #66BB6A;
    --green-dark: #388E3C;
    --green-light: #E8F5E9;
    --gray-light: #f4f7f6;
    --white: #fff;
    --purple-udemy:#A435F0; 
    --yellow:#FFB300;
    --blue:#42A5F5;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif;}
body{background:var(--gray-light);color:#212121;}

/* HEADER */
header{
    background:var(--green-dark);
    padding:15px 30px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    flex-wrap:wrap;
}
header .logo{
    display:flex;align-items:center;gap:10px;
}
header .logo img{height:150px;}
header .logo h1 {color:#fff;}
header nav ul{list-style:none;display:flex;gap:20px;flex-wrap:wrap;}
header nav a{text-decoration:none;color:#fff;font-weight:600;transition:0.3s;}
header nav a:hover{color:var(--yellow);}
header button{
    background:#fff;color:var(--green-dark);
    border:none;padding:10px 20px;border-radius:12px;
    font-weight:600;cursor:pointer;transition:0.3s;
}
header button:hover{background:var(--yellow);color:#000;}

/* Notificaciones */
.notifications {
    position: relative;
    cursor: pointer;
    margin-left: 20px;
}
.notification-icon {
    font-size: 1.5rem;
    color: var(--white);
    transition: 0.3s;
}
.notification-icon:hover { color: var(--yellow); }
.notification-badge {
    position: absolute;
    top: -5px;
    right: -10px;
    background-color: #f00;
    color: var(--white);
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 0.7rem;
    font-weight: bold;
}
.notification-dropdown {
    display: none;
    position: absolute;
    top: 40px;
    right: 0;
    background-color: var(--white);
    border: 1px solid #ccc;
    border-radius: 8px;
    width: 250px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    z-index: 10;
    padding: 10px;
}
.notification-item {
    padding: 8px;
    border-bottom: 1px solid #eee;
    font-size: 0.9rem;
}
.notification-item:last-child { border-bottom: none; }

/* PERFIL */
.profile {
    position: relative;
    text-align: center;
    margin-bottom: 30px;
}

/* Banner/Portada */
.profile-banner img {
    width: 100%;
    height: 250px; /* Ajusta según quieras más o menos alto */
    object-fit: cover;
    border-radius: 15px 15px 0 0;
}

/* Información y foto de perfil */
.profile-info {
    position: relative;
    margin-top: -70px; /* La mitad de la foto para que se superponga */
}

.profile-pic {
    width: 140px; 
    height: 140px; 
    border-radius: 50%; 
    border: 4px solid var(--green-primary);
    object-fit: cover;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

.profile-info h2 {
    margin-top: 10px;
    font-size: 1.6rem;
    color: var(--green-dark);
}

.profile-info p {
    color: #555;
    font-size: 1rem;
}

/* HISTORIAS */
.stories{
    display:flex;
    gap:15px;
    overflow-x:auto;
    padding:20px;
    margin:0 10px;
    justify-content:center;
}
.story{
    flex:0 0 auto;
    text-align:center;
    cursor:pointer;
}
.story img{
    width:110px;
    height:110px;
    border-radius:50%;
    border:3px solid var(--purple-udemy);
    object-fit:cover;
    transition:.3s;
}
.story p{
    font-size:0.9rem;
    color:#333;
    margin-top:5px;
}
.story:hover img{
    transform:scale(1.1);
    border-color:var(--yellow);
}

/* PUBLICACIÓN */
.new-post{
    background:var(--white);
    margin:20px;
    padding:15px;
    border-radius:15px;
    box-shadow:0 8px 20px rgba(0,0,0,0.1);
}
.new-post input{
    width:100%;
    border:none;
    outline:none;
    font-size:1rem;
    padding:10px;
}

/* FEED */
.feed{
    padding:20px;
}
.post{
    background:var(--white);
    margin-bottom:20px;
    padding:15px;
    border-radius:15px;
    box-shadow:0 8px 20px rgba(0,0,0,0.1);
}
.post .content{margin-bottom:10px;}
.post .reactions{display:flex;gap:10px;}
.post .reactions span {
    cursor: pointer;
    font-size: 1.2rem;
    transition: transform 0.2s ease, color 0.2s ease;
}
.post .reactions span:hover {
    transform: scale(1.3);
    color: var(--yellow);
}
.post .reactions span.liked {
    color: var(--yellow);
    transform: scale(1.3);
}

/* STATS */
.stats{
    display:flex;justify-content:center;gap:20px;
    flex-wrap:wrap;padding:20px;
}
.stats div{
    display:flex;
    flex-direction:column;
    align-items:center;
    background:var(--white);
    padding:20px;
    border-radius:15px;
    text-align:center;
    flex:1 1 150px;
    box-shadow:0 10px 25px rgba(0,0,0,0.1);
    transition:.3s;
}
.stats div img {
    width: 80px;
    height: 50px;
    display: block;
    margin-bottom: 10px;
}
.stats div img:hover {
    transform: scale(1.1);
    transition: transform 0.3s;
}
.stats h3{color:var(--green-dark);margin-bottom:5px;font-size:1.3rem;}
.stats p{font-size:.9rem;color:#555;}

/* CURSOS */
section.courses{
    padding:20px;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:20px;
}
.course-card{
    background:var(--white);
    border-radius:15px;
    padding:15px;
    box-shadow:0 8px 22px rgba(0,0,0,0.12);
    transition:.3s;
}
.course-card:hover{transform:translateY(-8px);}
.course-card h3{color:var(--green-dark);margin-bottom:10px;font-size:1.1rem;}
.course-card p{font-size:.9rem;color:#555;margin-bottom:8px;}
.progress-bar{
    background:var(--green-light);
    border-radius:8px;
    overflow:hidden;
    height:12px;
    margin-bottom:8px;
}
.progress-fill{
    height:12px;
    background:var(--green-dark);
    width:0%;
    transition:width 1s ease;
}

/* PUNTOS */
.points{
    background:linear-gradient(135deg,var(--green-primary),var(--blue));
    padding:20px;
    color:white;
    text-align:center;
    border-radius:15px;
    margin:20px;
    box-shadow:0 12px 28px rgba(0,0,0,0.2);
}
.points h2{font-size:1.8rem;margin-bottom:10px;}
.points p{font-size:1rem;}

/* CHAT */
.chat{
    padding:20px;
}
.chat h2{text-align:center;color:var(--green-dark);margin-bottom:15px;}
.chat-box{
    background:var(--white);
    border-radius:15px;
    padding:15px;
    max-width:600px;
    margin:0 auto;
    box-shadow:0 8px 22px rgba(0,0,0,0.12);
    min-height:150px;
    overflow-y:auto;
}
.message{
    margin-bottom:10px;
    max-width:80%;
    padding:8px 12px;
    border-radius:20px;
    font-size:.9rem;
    line-height:1.3;
}
.user{background:var(--green-primary);color:white;margin-left:auto;}
.friend-msg{background:var(--gray-light);color:#333;margin-right:auto;}

/* Modal Historias */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 20;
}
.modal-content {
    background: var(--white);
    padding: 20px;
    border-radius: 12px;
    max-width: 90%;
    max-height: 90%;
    text-align: center;
    position: relative;
    overflow: hidden;
}
.modal-content img {
    max-width: 100%;
    max-height: 70vh;
    border-radius: 8px;
    margin-bottom: 10px;
}
.close-modal-btn {
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 2rem;
    font-weight: bold;
    color: #fff;
    cursor: pointer;
    z-index: 21;
}
.modal-nav{
    display:flex;justify-content:space-between;margin-top:10px;
}
.modal-nav button{
    background:var(--green-dark);color:white;padding:8px 15px;border:none;border-radius:8px;cursor:pointer;
}

/* RESPONSIVE */
@media(max-width:768px){
    header{flex-direction:column;gap:15px;}
    .stats{flex-direction:column;align-items:center;}
    .stories{justify-content:flex-start;}
}
</style>
</head>
<body>

<header>
    <div class="logo">
        <img src="logo/logosinf.png" alt="Logo Arranca Ya!">
        <h1>ArrancaYa</h1>
    </div>
    <nav>
        <ul>
            <li><a href="cursos.html">Cursos</a></li>
            <li><a href="asesoria.html">Asesoria</a></li>
            <li><a href="asistente.html">Asistente</a></li>
            <li><a href="historico.html">Histórico</a></li>
            <li><a href="retos.html">Retos</a></li>
            <li><a href="contacto.html">Contacto</a></li>
        </ul>
    </nav>
    <div class="notifications">
        <i class="fa-solid fa-bell notification-icon"></i>
        <span class="notification-badge" id="notification-badge" style="display:none;">0</span>
        <div class="notification-dropdown" id="notification-dropdown"></div>
    </div>
    <button id="logoutBtn">Cerrar sesión</button>
</header>

<section class="profile">
    <div class="profile-banner">
        <img src="logo/cielo.jpg" alt="Banner de biografía">
    </div>
    <div class="profile-info">
        <img class="profile-pic" src="logo/perfil.jpg" alt="Foto de perfil">
        <h2 id="userEmail">Usuario</h2>
        <p>Aprendiz entusiasta 🚀 | Nivel 3</p>
    </div>
</section>


<div class="stories" id="storiesContainer"></div>

<div class="new-post">
   <input type="text" placeholder="" id="newPostInput">
</div>

<div class="feed" id="feedContainer"></div>

<section class="stats">
    <div>
        <img src="logo/cursibtn.jpg" alt="Cursos Inscritos" style="width:40px;margin-bottom:8px;">
        <h3 id="totalCourses">0</h3>
        <p>Cursos Inscritos</p>
    </div>
    <div>
        <img src="logo/complete.jpg" alt="Completados" style="width:40px;margin-bottom:8px;">
        <h3 id="completedCourses">0</h3>
        <p>Completados</p>
    </div>
    <div>
        <img src="logo/progreso.jpg" alt="Progreso" style="width:40px;margin-bottom:8px;">
        <h3 id="progressPercent">0%</h3>
        <p>Progreso</p>
    </div>
</section>

<section class="courses" id="coursesContainer"></section>

<section class="points">
    <h2>1,250 Puntos</h2>
    <p>¡Sigue aprendiendo y desbloquea recompensas! 🎁</p>
</section>

<section class="chat">
    <h2>Chat con amigo</h2>
    <div id="friendsList" style="display:flex;gap:10px;margin-bottom:10px;justify-content:center;"></div>
    <div class="chat-box" id="chatBox">
        <p style="text-align:center;color:#999;">Selecciona un amigo para chatear</p>
    </div>
    <input type="text" id="chatInput" placeholder="Escribe un mensaje..." style="width:100%;padding:10px;margin-top:10px;">
</section>

<!-- Modal -->
<div id="modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <span class="close-modal-btn">&times;</span>
        <img id="modal-image" src="" alt="Contenido de la historia">
        <p id="modal-text"></p>
        <div class="modal-nav">
            <button id="prevStory">&lt; Anterior</button>
            <button id="nextStory">Siguiente &gt;</button>
        </div>
    </div>
</div>

<footer>© 2025 Arranca Ya! Todos los derechos reservados.</footer>

<script>
// Placeholder dinámico
const placeholders = [
    "¿Qué estás creando hoy? Comparte tu progreso...",
    "¡Cuenta a la comunidad tu próximo gran paso! 🚀",
    "¿Tienes una pregunta? La comunidad de Arranca Ya te ayuda...",
    "Comparte un consejo de emprendimiento que te haya servido..."
];
const newPostInput = document.getElementById('newPostInput');
const randomPlaceholder = placeholders[Math.floor(Math.random() * placeholders.length)];
newPostInput.placeholder = randomPlaceholder;

// LOGIN
if(!localStorage.getItem('loggedIn')) window.location.href='index.html';
document.getElementById('userEmail').textContent = localStorage.getItem('userEmail');

// CURSOS
const courses = [
    { title:'Emprendimiento Básico', desc:'Aprende los fundamentos del emprendimiento', progress:75 },
    { title:'Marketing Digital', desc:'Domina estrategias de marketing online', progress:50 },
    { title:'Finanzas Personales', desc:'Controla tus ingresos y gastos eficazmente', progress:90 },
    { title:'Productividad y Gestión', desc:'Optimiza tu tiempo y proyectos', progress:30 }
];
const container=document.getElementById('coursesContainer');
let totalProgress=0, completedCount=0;
courses.forEach(course=>{
    const card=document.createElement('div'); card.classList.add('course-card');
    card.innerHTML=`<h3>${course.title}</h3><p>${course.desc}</p>
    <div class="progress-bar"><div class="progress-fill" style="width:${course.progress}%"></div></div>`;
    container.appendChild(card);
    totalProgress+=course.progress; if(course.progress===100) completedCount++;
});
document.getElementById('totalCourses').textContent=courses.length;
document.getElementById('completedCourses').textContent=completedCount;
document.getElementById('progressPercent').textContent=Math.round(totalProgress/courses.length)+"%";

// AMIGOS / HISTORIAS
const friends=[
    {name:'aurora', img:'logo/aurora.jpg'},
    {name:'Carlos', img:'logo/carlos.jpg'},
    {name:'Laura', img:'logo/laura.jpg'},
    {name:'David', img:'logo/david.jpg'},
    {name:'Sofía', img:'logo/sofia.jpg'}
];
const storiesContainer=document.getElementById('storiesContainer');
let currentStoryIndex = 0;
friends.forEach((friend,i)=>{
    const div=document.createElement('div'); div.classList.add('story');
    div.innerHTML=`<img src="${friend.img}" alt="${friend.name}"><p>${friend.name}</p>`;
    div.addEventListener('click',()=>openModal(i));
    storiesContainer.appendChild(div);
});

// MODAL
const modal = document.getElementById('modal');
const modalImage = document.getElementById('modal-image');
const modalText = document.getElementById('modal-text');
const closeModalBtn = document.querySelector('.close-modal-btn');
const prevStoryBtn = document.getElementById('prevStory');
const nextStoryBtn = document.getElementById('nextStory');

function openModal(index){
    currentStoryIndex=index;
    updateModal();
    modal.style.display='flex';
}
function updateModal(){
    const friend=friends[currentStoryIndex];
    modalImage.src=friend.img;
    modalText.textContent=`Historia de ${friend.name}`;
}
prevStoryBtn.onclick=()=>{ currentStoryIndex=(currentStoryIndex-1+friends.length)%friends.length; updateModal();}
nextStoryBtn.onclick=()=>{ currentStoryIndex=(currentStoryIndex+1)%friends.length; updateModal();}
closeModalBtn.onclick=()=>{ modal.style.display='none';}
modal.onclick=(e)=>{ if(e.target===modal) modal.style.display='none'; }

// FEED PERSISTENTE
const feedContainer=document.getElementById('feedContainer');
const postInput=document.getElementById('newPostInput');
let posts=JSON.parse(localStorage.getItem('posts'))||[];
function renderFeed(){
    feedContainer.innerHTML='';
    posts.slice().reverse().forEach(p=>{
        const div=document.createElement('div'); div.classList.add('post');
        div.innerHTML=`<div class="content">${p.text}</div>
        <div class="reactions">
            <span class="like">&#9733;</span>
            <span class="comment">&#128172;</span>
        </div>`;
        feedContainer.appendChild(div);
        const likeBtn=div.querySelector('.like');
        likeBtn.addEventListener('click',()=>{ likeBtn.classList.toggle('liked');});
    });
}
renderFeed();
postInput.addEventListener('keypress',e=>{
    if(e.key==='Enter' && postInput.value.trim()!==''){
        posts.push({text:postInput.value}); localStorage.setItem('posts',JSON.stringify(posts));
        postInput.value=''; renderFeed();
    }
});

// NOTIFICACIONES
const notificationBadge = document.getElementById('notification-badge');
const notificationDropdown = document.getElementById('notification-dropdown');
let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
function updateNotifications(){
    notificationDropdown.innerHTML = '';
    notifications.forEach(n=>{
        const div = document.createElement('div'); div.classList.add('notification-item');
        div.textContent = n;
        notificationDropdown.appendChild(div);
    });
    notificationBadge.textContent = notifications.length;
    notificationBadge.style.display = notifications.length ? 'inline-block' : 'none';
}
updateNotifications();
document.querySelector('.notification-icon').addEventListener('click',()=>{
    notificationDropdown.style.display = notificationDropdown.style.display==='block' ? 'none' : 'block';
});

// CERRAR SESIÓN
document.getElementById('logoutBtn').addEventListener('click',()=>{
    localStorage.removeItem('loggedIn'); localStorage.removeItem('userEmail'); window.location.href='index.html';
});

// --------------------
// CHAT INTERACTIVO
const friendsList = document.getElementById('friendsList');
const chatInput = document.getElementById('chatInput');
const chatBox = document.getElementById('chatBox');
let currentFriend = null;

// Genera botones de amigos
friends.forEach(friend => {
    const btn = document.createElement('button');
    btn.textContent = friend.name;
    btn.style.padding = '8px 12px';
    btn.style.borderRadius = '12px';
    btn.style.cursor = 'pointer';
    btn.style.border = '1px solid var(--green-dark)';
    btn.style.background = 'var(--white)';
    btn.style.color = 'var(--green-dark)';
    btn.addEventListener('click', () => openChat(friend));
    friendsList.appendChild(btn);
});

// Abre chat de un amigo
function openChat(friend){
    currentFriend = friend;
    const key = `chat_${friend.name}`;
    let msgs = JSON.parse(localStorage.getItem(key)) || [];
    chatBox.innerHTML = '';
    msgs.forEach(m => {
        const div = document.createElement('div');
        div.className = m.user ? 'message user' : 'message friend-msg';
        div.textContent = m.text;
        chatBox.appendChild(div);
    });
    chatBox.scrollTop = chatBox.scrollHeight;
}

// Enviar mensaje con Enter
chatInput.addEventListener('keypress', function(e){
    if(e.key === 'Enter' && chatInput.value.trim() !== '' && currentFriend){
        const key = `chat_${currentFriend.name}`;
        let msgs = JSON.parse(localStorage.getItem(key)) || [];
        msgs.push({user:true, text: chatInput.value});
        msgs.push({user:false, text: `Respuesta automática de ${currentFriend.name}`});
        localStorage.setItem(key, JSON.stringify(msgs));
        openChat(currentFriend);
        chatInput.value = '';
    }
});
</script>

</body>
</html>
